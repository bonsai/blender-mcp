# Blender MCP Phone System - UX Flow

## ğŸ¯ å…¨ä½“ãƒ•ãƒ­ãƒ¼ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹ + å†…éƒ¨å‡¦ç†ï¼‰

### Phase 1: ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼: Blenderã‚’èµ·å‹•                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] Blender Addonèµ·å‹•                                         â”‚
â”‚ - Socket Server èµ·å‹• (localhost:9876)                           â”‚
â”‚ - "BlenderMCP" ãƒ‘ãƒãƒ«è¡¨ç¤º                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼: "Connect to MCP server" ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯              â”‚
â”‚ è¡¨ç¤º: "Waiting for MCP connection..."                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] MCP Serverèµ·å‹• (uvx blender-mcp)                         â”‚
â”‚ - FastMCP ã‚µãƒ¼ãƒãƒ¼èµ·å‹•                                          â”‚
â”‚ - Blender Addon ã«æ¥ç¶šç¢ºèª                                      â”‚
â”‚ - Session Manager åˆæœŸåŒ–                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] OLLAMAèµ·å‹•                                               â”‚
â”‚ - LLM ã‚µãƒ¼ãƒãƒ¼èµ·å‹• (localhost:11434)                            â”‚
â”‚ - ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰ (e.g., llama2, mistral)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼: MCP Client (Cursor / Claude Desktop) ã§æ¥ç¶š           â”‚
â”‚ è¡¨ç¤º: "âœ“ Connected to Blender MCP"                              â”‚
â”‚ è¡¨ç¤º: "âœ“ OLLAMA Ready"                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Phase 2: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè©±ã—ã‹ã‘ã‚‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼: "Create a red cube in the center"                     â”‚
â”‚ (MCP Client ã«å…¥åŠ›)                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] MCP Client â†’ OLLAMA                                      â”‚
â”‚ - è‡ªç„¶è¨€èªã‚’é€ä¿¡                                                â”‚
â”‚ - System Prompt ã«ç¾åœ¨ã®BlenderçŠ¶æ…‹ã‚’æ³¨å…¥                       â”‚
â”‚   "Current scene: 3 objects (Cube, Camera, Light)"              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] OLLAMA: è‡ªç„¶è¨€èªå‡¦ç†                                     â”‚
â”‚ - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã‚’ç†è§£                                          â”‚
â”‚ - å¿…è¦ãªãƒ„ãƒ¼ãƒ«ï¼ˆMCP Toolsï¼‰ã‚’ç‰¹å®š                               â”‚
â”‚ - Tool Call ã‚’ç”Ÿæˆ                                              â”‚
â”‚   ä¾‹: {                                                         â”‚
â”‚     "tool": "execute_blender_code",                             â”‚
â”‚     "args": {                                                   â”‚
â”‚       "code": "bpy.ops.mesh.primitive_cube_add(...)"            â”‚
â”‚     }                                                           â”‚
â”‚   }                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] OLLAMA â†’ MCP Server                                      â”‚
â”‚ - Tool Call ã‚’é€ä¿¡                                              â”‚
â”‚ - Session ID ã‚’ä»˜ä¸                                             â”‚
â”‚   "session_id": "scene-2026-01-06-001"                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] MCP Server: Session Manager                              â”‚
â”‚ - Session ID ã§çŠ¶æ…‹ã‚’æ¤œç´¢                                       â”‚
â”‚ - Blender Socket æ¥ç¶šç¢ºèªï¼ˆkeep-aliveï¼‰                         â”‚
â”‚ - Tool Call ã‚’ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] MCP Server â†’ Blender Addon                               â”‚
â”‚ - JSON ã‚³ãƒãƒ³ãƒ‰é€ä¿¡                                              â”‚
â”‚   {                                                             â”‚
â”‚     "type": "execute_code",                                     â”‚
â”‚     "params": {                                                 â”‚
â”‚       "code": "bpy.ops.mesh.primitive_cube_add(...)",           â”‚
â”‚       "session_id": "scene-2026-01-06-001"                      â”‚
â”‚     }                                                           â”‚
â”‚   }                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] Blender Addon: ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ                               â”‚
â”‚ - Python ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ (bpy)                                       â”‚
â”‚ - Blender å†…éƒ¨çŠ¶æ…‹ã‚’æ›´æ–°                                        â”‚
â”‚ - çµæœã‚’ JSON ã§è¿”å´                                             â”‚
â”‚   {                                                             â”‚
â”‚     "status": "success",                                        â”‚
â”‚     "result": {                                                 â”‚
â”‚       "object_name": "Cube",                                    â”‚
â”‚       "location": [0, 0, 0]                                     â”‚
â”‚     }                                                           â”‚
â”‚   }                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] MCP Server: Session Manager                              â”‚
â”‚ - çµæœã‚’å—ã‘å–ã‚‹                                                â”‚
â”‚ - Session çŠ¶æ…‹ã‚’æ›´æ–°                                            â”‚
â”‚   {                                                             â”‚
â”‚     "session_id": "scene-2026-01-06-001",                       â”‚
â”‚     "last_command": "execute_blender_code",                     â”‚
â”‚     "objects": ["Cube", "Camera", "Light", "Cube.001"],         â”‚
â”‚     "selection": "Cube.001"                                     â”‚
â”‚   }                                                             â”‚
â”‚ - çµæœã‚’ MCP Client ã«è¿”å´                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] MCP Client â†’ OLLAMA                                      â”‚
â”‚ - Tool å®Ÿè¡Œçµæœã‚’é€ä¿¡                                           â”‚
â”‚ - æ–°ã—ã„ Session çŠ¶æ…‹ã‚’æ³¨å…¥                                     â”‚
â”‚   "Updated scene: 4 objects (Cube, Camera, Light, Cube.001)"    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] OLLAMA: å¿œç­”ç”Ÿæˆ                                         â”‚
â”‚ - Tool å®Ÿè¡Œçµæœã‚’è§£é‡ˆ                                           â”‚
â”‚ - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å¿œç­”ã‚’ç”Ÿæˆ                                        â”‚
â”‚   "Created a red cube at the center of the scene."              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼: å¿œç­”ã‚’å—ã‘å–ã‚‹                                        â”‚
â”‚ è¡¨ç¤º: "Created a red cube at the center of the scene."          â”‚
â”‚ [Blenderç”»é¢] ã‚­ãƒ¥ãƒ¼ãƒ–ãŒè¡¨ç¤ºã•ã‚Œã‚‹ âœ“                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Phase 3: ç¶™ç¶šçš„ãªä¼šè©±ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿æŒï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼: "Make it bigger"                                      â”‚
â”‚ (å‰å›ã®ã‚³ãƒãƒ³ãƒ‰ã®ç¶šã)                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] MCP Client â†’ OLLAMA                                      â”‚
â”‚ - Session ID ã¯åŒã˜: "scene-2026-01-06-001"                    â”‚
â”‚ - å‰å›ã®çŠ¶æ…‹ã‚’ Context ã«å«ã‚ã‚‹                                 â”‚
â”‚   "Current selection: Cube.001"                                 â”‚
â”‚   "Last action: Created cube"                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] OLLAMA: æ–‡è„ˆã‚’ç†è§£                                       â”‚
â”‚ - "it" = å‰å›ä½œæˆã—ãŸ Cube.001                                  â”‚
â”‚ - Tool Call ã‚’ç”Ÿæˆ                                              â”‚
â”‚   {                                                             â”‚
â”‚     "tool": "execute_blender_code",                             â”‚
â”‚     "args": {                                                   â”‚
â”‚       "code": "bpy.context.object.scale = (2, 2, 2)"            â”‚
â”‚     }                                                           â”‚
â”‚   }                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å†…éƒ¨] MCP Server: Session Manager                              â”‚
â”‚ - åŒã˜ Session ID ã§å‡¦ç†                                        â”‚
â”‚ - Blender Socket ã¯æ—¢ã«æ¥ç¶šæ¸ˆã¿ï¼ˆkeep-aliveï¼‰                  â”‚
â”‚ - ã‚³ãƒãƒ³ãƒ‰é€ä¿¡ â†’ å®Ÿè¡Œ â†’ çŠ¶æ…‹æ›´æ–°                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼: "Scaled up successfully"                              â”‚
â”‚ [Blenderç”»é¢] ã‚­ãƒ¥ãƒ¼ãƒ–ãŒå¤§ãããªã‚‹ âœ“                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Session Manager ã®çŠ¶æ…‹ç®¡ç†

### Session æ§‹é€ 

```json
{
  "session_id": "scene-2026-01-06-001",
  "created_at": 1704528000,
  "blender": {
    "conn": "<socket object>",
    "connected": true,
    "host": "localhost",
    "port": 9876
  },
  "state": {
    "objects": ["Cube", "Camera", "Light", "Cube.001"],
    "selection": "Cube.001",
    "last_command": "execute_blender_code",
    "last_result": {
      "status": "success",
      "object_name": "Cube.001",
      "scale": [2, 2, 2]
    },
    "command_history": [
      {
        "timestamp": 1704528010,
        "command": "execute_blender_code",
        "args": {"code": "bpy.ops.mesh.primitive_cube_add(...)"},
        "result": "success"
      },
      {
        "timestamp": 1704528015,
        "command": "execute_blender_code",
        "args": {"code": "bpy.context.object.scale = (2, 2, 2)"},
        "result": "success"
      }
    ]
  }
}
```

---

## ğŸ”„ Key-Alive ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

### å¾“æ¥ã®æ–¹å¼ï¼ˆå•é¡Œã‚ã‚Šï¼‰

```
Request 1: socket.open() â†’ send â†’ recv â†’ socket.close()
Request 2: socket.open() â†’ send â†’ recv â†’ socket.close()
Request 3: socket.open() â†’ send â†’ recv â†’ socket.close()

âŒ æ¯å›æ¥ç¶šã‚’å¼µã‚Šç›´ã™
âŒ Blender å´ã®çŠ¶æ…‹ãŒå¤±ã‚ã‚Œã‚‹å¯èƒ½æ€§
âŒ é…ã„
```

### Session Manager æ–¹å¼ï¼ˆæ”¹å–„ï¼‰

```
Session Start: socket.open() â†’ keep-alive
Request 1: send â†’ recv (socket å†åˆ©ç”¨)
Request 2: send â†’ recv (socket å†åˆ©ç”¨)
Request 3: send â†’ recv (socket å†åˆ©ç”¨)
Session End: socket.close()

âœ“ 1å›ã®æ¥ç¶šã§è¤‡æ•°ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†
âœ“ Blender çŠ¶æ…‹ã‚’ä¿æŒ
âœ“ é«˜é€Ÿ
```

---

## ğŸ¯ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ãˆã‚‹éƒ¨åˆ†

### MCP Client UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Blender MCP Chat                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ You: Create a red cube in the center                   â”‚
â”‚                                                         â”‚
â”‚ Assistant: I'll create a red cube for you.             â”‚
â”‚ [Tool: execute_blender_code]                           â”‚
â”‚ âœ“ Created a red cube at the center of the scene.       â”‚
â”‚                                                         â”‚
â”‚ You: Make it bigger                                    â”‚
â”‚                                                         â”‚
â”‚ Assistant: I'll scale up the cube.                     â”‚
â”‚ [Tool: execute_blender_code]                           â”‚
â”‚ âœ“ Scaled the cube to 2x size.                          â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Type your message...                                â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Blender Viewport

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Blender 3D Viewport                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚                                                         â”‚
â”‚              [Red Cube] â† ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŒ‡ç¤ºã§ä½œæˆ         â”‚
â”‚                                                         â”‚
â”‚                                                         â”‚
â”‚                                                         â”‚
â”‚                                                         â”‚
â”‚ BlenderMCP Panel:                                       â”‚
â”‚ âœ“ Connected to MCP server                              â”‚
â”‚ âœ“ OLLAMA Ready                                          â”‚
â”‚ Session: scene-2026-01-06-001                          â”‚
â”‚ Objects: 4                                              â”‚
â”‚ Selection: Cube.001                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ãˆãªã„éƒ¨åˆ†ï¼ˆå†…éƒ¨å‡¦ç†ï¼‰

### Session Manager ãƒ­ã‚°

```
[2026-01-06 10:00:00] Session created: scene-2026-01-06-001
[2026-01-06 10:00:01] Blender socket connected: localhost:9876
[2026-01-06 10:00:05] Command received: execute_blender_code
[2026-01-06 10:00:05] Session state updated: objects=[Cube, Camera, Light, Cube.001]
[2026-01-06 10:00:10] Command received: execute_blender_code
[2026-01-06 10:00:10] Session state updated: selection=Cube.001, scale=[2, 2, 2]
```

### MCP Server ãƒ­ã‚°

```
[2026-01-06 10:00:00] FastMCP server started
[2026-01-06 10:00:01] Connected to Blender addon
[2026-01-06 10:00:05] Tool call: execute_blender_code
[2026-01-06 10:00:05] Routing to session: scene-2026-01-06-001
[2026-01-06 10:00:05] Blender response: success
[2026-01-06 10:00:10] Tool call: execute_blender_code
[2026-01-06 10:00:10] Routing to session: scene-2026-01-06-001
[2026-01-06 10:00:10] Blender response: success
```

### OLLAMA ãƒ­ã‚°

```
[2026-01-06 10:00:05] Processing: "Create a red cube in the center"
[2026-01-06 10:00:05] Context: Current scene: 3 objects (Cube, Camera, Light)
[2026-01-06 10:00:05] Tool selected: execute_blender_code
[2026-01-06 10:00:05] Tool result: success
[2026-01-06 10:00:05] Generating response...
[2026-01-06 10:00:10] Processing: "Make it bigger"
[2026-01-06 10:00:10] Context: Current selection: Cube.001, Last action: Created cube
[2026-01-06 10:00:10] Tool selected: execute_blender_code
[2026-01-06 10:00:10] Tool result: success
```

---

## ğŸš€ Session ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Session Lifecycle                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚ 1. CREATE                                                â”‚
â”‚    â””â”€ Session ID ç”Ÿæˆ                                    â”‚
â”‚    â””â”€ Blender Socket æ¥ç¶š                                â”‚
â”‚    â””â”€ åˆæœŸçŠ¶æ…‹ã‚’è¨˜éŒ²                                     â”‚
â”‚                                                          â”‚
â”‚ 2. ACTIVE (Keep-Alive)                                   â”‚
â”‚    â””â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒãƒ³ãƒ‰å—ä¿¡                                â”‚
â”‚    â””â”€ Tool Call å®Ÿè¡Œ                                     â”‚
â”‚    â””â”€ çŠ¶æ…‹æ›´æ–°                                           â”‚
â”‚    â””â”€ å¿œç­”è¿”å´                                           â”‚
â”‚    â””â”€ Socket ä¿æŒ                                        â”‚
â”‚                                                          â”‚
â”‚ 3. IDLE (Timeout)                                        â”‚
â”‚    â””â”€ ä¸€å®šæ™‚é–“ã‚³ãƒãƒ³ãƒ‰ãªã—                                â”‚
â”‚    â””â”€ Socket ä¿æŒï¼ˆå†åˆ©ç”¨å¯èƒ½ï¼‰                          â”‚
â”‚                                                          â”‚
â”‚ 4. CLOSE                                                 â”‚
â”‚    â””â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«çµ‚äº†                              â”‚
â”‚    â””â”€ ã¾ãŸã¯ Timeout è¶…é                                â”‚
â”‚    â””â”€ Socket ã‚¯ãƒ­ãƒ¼ã‚º                                    â”‚
â”‚    â””â”€ å±¥æ­´ã‚’ä¿å­˜ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰                            â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Session Manager API

### ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰

```python
# Session å–å¾—ãƒ»ä½œæˆ
session = session_manager.get(session_id)

# Session çŠ¶æ…‹æ›´æ–°
session_manager.update_state(session_id, objects=[...], selection=...)

# Blender æ¥ç¶šå–å¾—
conn = session_manager.get_blender_connection(session_id)

# Tool Call ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
result = session_manager.handle_tool_call(
    session_id=session_id,
    tool_name="execute_blender_code",
    args={"code": "..."}
)

# Session ã‚¯ãƒ­ãƒ¼ã‚º
session_manager.close_session(session_id)

# Session ä¸€è¦§
sessions = session_manager.list_sessions()

# Session å±¥æ­´å–å¾—
history = session_manager.get_history(session_id)
```

---

## ğŸ¯ ã¾ã¨ã‚

| å±¤ | å½¹å‰² | çŠ¶æ…‹ç®¡ç† |
|---|---|---|
| **OLLAMA** | è‡ªç„¶è¨€èªå‡¦ç† | ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ï¼ˆContext ã§è£œå®Œï¼‰ |
| **MCP Server** | Tool ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° | ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ï¼ˆSession Manager ã«å§”è­²ï¼‰ |
| **Session Manager** | çŠ¶æ…‹ä¿æŒãƒ»Blender æ¥ç¶šç®¡ç† | **ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«** â† â˜…ã“ã“ãŒå¿ƒè‡“ |
| **Blender Addon** | Python å®Ÿè¡Œ | ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ï¼ˆBlender å†…éƒ¨çŠ¶æ…‹ã®ã¿ï¼‰ |

**çµæœ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€Œä¼šè©±ã‚’ç¶šã‘ã‚‹ã€ã ã‘ã§ã€è¤‡æ•°ã®ã‚³ãƒãƒ³ãƒ‰ãŒåŒã˜ä½œæ¥­ã®å»¶é•·ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ã€‚
