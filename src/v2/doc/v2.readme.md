# Blender MCP System V2

## 概要

V2 は **Blender × MCP × LLM × 外部UI（Slack / Continue）** を統合し、
**自然言語だけで建築図面・3D構造を設計できる自動化システム** を目指します。

V1 が「BlenderとMCPがつながる」段階だったのに対し、
V2 は **常駐・自律・多セッション・業務利用** を前提に構想を拡張します。

---

## V2 ゴール（思想）

* 🧠 **自然言語が唯一のUI**
* 🏗️ **建築図面・構造物を段階的に育てる**
* 🔌 **Blenderは黙って起動・黙って待機**
* 🧑‍✈️ **セッションは人間単位で永続管理**
* 📜 **ログは設計書そのもの**

---

## 全体アーキテクチャ（V2）

```
[ Slack / Continue / CLI ]
            │
            ▼
      Session Manager（中枢）
            │
   ┌────────┼────────┐
   ▼        ▼        ▼
 Blender   MCP     LLM(Ollama等)
 Server    Tools   Prompt Engine
```

---

## 改修計画（V2）

### 1️⃣ 自動インストール

**目的**

* 環境構築を「1コマンド」にする

**方針**

* PowerShell (`.ps1`) をエントリポイントに採用
* Python / Go バイナリは自動取得

**内容**

* Blender Addon の自動配置
* MCP Server / Session Manager の依存解決
* Ollama 接続確認

**例**

```ps1
./install.ps1
```

---

### 2️⃣ 自動起動（常駐化）

**目的**

* Blender / MCP / Session Manager を意識させない

**方針**

* Windows Task Scheduler or 常駐プロセス

**起動順**

1. Session Manager 起動
2. Blender 起動（--background 可）
3. MCP Server 自動 connect

---

### 3️⃣ 自動セッション管理

**目的**

* 「人 × プロジェクト × 会話」を失わない

**設計**

* `session_id = user_id + project_id`
* セッションは **終了しない**

**管理内容**

* Blender 接続
* オブジェクト履歴
* 設計意図（自然言語）

---

### 4️⃣ ログの見やすさ・保存

**目的**

* ログ = 建築ドキュメント

**ログ種別**

* command.log（自然言語）
* blender.log（操作履歴）
* state.json（構造状態）

**特徴**

* 時系列
* 差分追跡
* Markdown 再生成可能

---

### 5️⃣ Slack / Continue から入力

**目的**

* IDE・チャットを設計UIにする

**Slack**

* `/blender continue`
* スレッド = セッション

**Continue**

* 選択テキスト → 3D反映

---

### 6️⃣ 自然言語ファースト設計

**優先順位**

1. 日本語プロンプト
2. 建築用語（壁・柱・スパン）
3. 曖昧さを Session が補完

**例**

```
2階建ての木造住宅
1階は20坪、南側に大開口
```

---

## 建築図面ユースケース

* 平面図 → 立体化
* 構造グリッド生成
* 後から条件変更

**重要**

> コードではなく「設計意図」を保存する

---

## 使用言語ポリシー

| 役割        | 言語           |
| --------- | ------------ |
| インストーラ    | PowerShell   |
| セッション管理   | Python       |
| 高速処理 / 常駐 | Go           |
| Blender操作 | Python (bpy) |

---

## ロードマップ

* V2.1 セッション永続化
* V2.2 建築プロンプト辞書
* V2.3 図面 → BIM 連携

---

## 最後に

これは **Blenderを操作するツールではなく**、
**空間を会話で設計するシステム** です。

V2 では、その覚悟で作ります。
